<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<BorderPane nodeOrientation="LEFT_TO_RIGHT" prefHeight="600.0" prefWidth="1000.0" styleClass="app-root" stylesheets="@../../css/main.css" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.wakeb.yusradmin.controllers.MainController">
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>

<?import javafx.scene.control.cell.PropertyValueFactory?>
<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.wakeb.yusradmin.controllers.DashboardController"
            stylesheets="@css/dashboard.css">
    <right>
        <!-- Sidebar -->
        <VBox styleClass="sidebar" spacing="20" alignment="TOP_RIGHT" prefWidth="220">
            <VBox styleClass="admin-profile" alignment="TOP_RIGHT" spacing="10">
                <ImageView fx:id="adminAvatar" fitWidth="80" fitHeight="80" styleClass="admin-avatar">
                    <Image url="@images/avatar.png" />
                </ImageView>
                <Label fx:id="adminNameLabel" text="أحمد خالد" styleClass="admin-name"/>
                <Label fx:id="adminEmailLabel" text="ahmed@gmail.com" styleClass="admin-email"/>
            </VBox>
        <VBox alignment="TOP_RIGHT" prefWidth="260" spacing="12" styleClass="sidebar">

            <VBox spacing="4" />
            <Region prefHeight="41.0" prefWidth="223.0" />

            <HBox prefHeight="55.0" prefWidth="223.0" style="-fx-spacing: 20;">
                <children>
                    <VBox nodeOrientation="LEFT_TO_RIGHT" prefHeight="74.0" prefWidth="174.0" spacing="4">
                        <children>
                            <Label alignment="TOP_RIGHT" prefHeight="2.0" prefWidth="223.0" style="-fx-font-weight: bold;" text="ماجد الشهري" />
                            <Label alignment="TOP_RIGHT" prefHeight="18.0" prefWidth="284.0" styleClass="muted" text="engmajedas1@gmail.com" />
                        </children>
                    </VBox>
                    <VBox alignment="TOP_RIGHT" prefHeight="44.0" prefWidth="53.0">
                        <children>
                            <Label contentDisplay="RIGHT" prefHeight="41.0" prefWidth="43.0" styleClass="bg-logo" text="م" />
                        </children>
                    </VBox>
                </children>
            </HBox>

            <Region prefHeight="10.0" prefWidth="223.0" />

            <VBox styleClass="vbox-sidbar-sections">

            <!-- Navigation -->
            <VBox styleClass="navigation" spacing="15" alignment="TOP_RIGHT">
                <Button styleClass="nav-button" text="نظرة عامة" contentDisplay="RIGHT">
                    <graphic>
                        <ImageView fitWidth="20" fitHeight="20">
                            <Image url="@images/home.png" />
                        </ImageView>
                    </graphic>
                </Button>
                <Button styleClass="nav-button" text="إدارة الحساب" contentDisplay="RIGHT">
                    <graphic>
                        <ImageView fitWidth="20" fitHeight="20">
                            <Image url="@images/account.png" />
                        </ImageView>
                    </graphic>
                </Button>
                <Button styleClass="nav-button" text="إدارةالتقييمات" contentDisplay="RIGHT">
                    <graphic>
                        <ImageView fitWidth="20" fitHeight="20">
                            <Image url="@images/reviews.png" />
                        </ImageView>
                    </graphic>
                </Button>
                <Button styleClass="nav-button" text="إدارة الأماكن" contentDisplay="RIGHT">
                    <graphic>
                        <ImageView fitWidth="20" fitHeight="20">
                            <Image url="@images/places.png" />
                        </ImageView>
                    </graphic>
                </Button>

                <VBox styleClass="section-group">
                    <children>
                        <Label alignment="TOP_RIGHT" prefHeight="22.0" prefWidth="311.0" styleClass="section-title" text="عام" />
                        <ToggleButton fx:id="overviewBtn" maxWidth="Infinity" onAction="#handleOverviews" prefHeight="40.0" selected="true" styleClass="nav-btn" text="نظرة عامة">
                     <toggleGroup>
                        <ToggleGroup fx:id="sideNav" />
                     </toggleGroup></ToggleButton>
                    </children>
                </VBox>

                <Region prefWidth="200" styleClass="section-divider" />


                <VBox styleClass="section-group">
                    <children>
                        <Label alignment="TOP_RIGHT" prefHeight="22.0" prefWidth="435.0" styleClass="section-title" text="الإدارة" />
                        <ToggleButton fx:id="usersBtn" maxWidth="Infinity" onAction="#handleUsers" prefHeight="40.0" styleClass="nav-btn" text="إدارة الحسابات" toggleGroup="$sideNav" />
                        <ToggleButton fx:id="reviewsBtn" maxWidth="Infinity" onAction="#handleReviews" prefHeight="40.0" styleClass="nav-btn" text="إدارة التقييمات" toggleGroup="$sideNav" />
                        <ToggleButton fx:id="placesBtn" maxWidth="Infinity" onAction="#handlePlaces" prefHeight="40.0" styleClass="nav-btn" text="إدارة الأماكن" toggleGroup="$sideNav" />
                    </children>
                </VBox>

            </VBox>


            <Region prefHeight="71.0" prefWidth="223.0" VBox.vgrow="ALWAYS" />

            <Button fx:id="loginBtn" maxWidth="Infinity" onAction="#handleLogout" styleClass="logout-btn" text="تسجيل خروج" />


            <fx:define>
                <ToggleGroup fx:id="sideNav" />
            </fx:define>


            <fx:define>
                <ToggleGroup fx:id="sideNav" />
            </fx:define>
            <Region VBox.vgrow="ALWAYS"/>
            <!-- Logout Button at Bottom -->
            <Button styleClass="logout-btn" text="تسجيل خروج" contentDisplay="RIGHT" >
                <graphic>
                    <ImageView fitWidth="20" fitHeight="20">
                        <Image url="@images/logout.png" />
                    </ImageView>
                </graphic>
            </Button>
        </VBox>
    </right>

    <center>
        <VBox spacing="20" style="-fx-padding: 20;">
            <!-- Statistics Cards -->
            <HBox spacing="20" alignment="TOP_CENTER">
                <VBox styleClass="stat-card">
                    <HBox alignment="CENTER" spacing="10">
                        <!--                        <ImageView fitWidth="30" fitHeight="30">-->
                        <!--                            <Image url="@../icons/users.png" />-->
                        <!--                        </ImageView>-->
                        <Label text="عدد الحسابات المسجلة" styleClass="stat-title"/>
                    </HBox>
                    <Label fx:id="registeredUsersLabel" text="0 حساب" styleClass="stat-value"/>
                </VBox>
                <VBox styleClass="stat-card">
                    <HBox alignment="CENTER" spacing="10">
                        <ImageView fitWidth="30" fitHeight="30">
                            <Image url="@images/reviews.png" />
                        </ImageView>
                        <Label text="إجمالي التعليقات" styleClass="stat-title"/>
                    </HBox>
                    <Label fx:id="totalReviewsLabel" text="0 تعليق" styleClass="stat-value"/>
                </VBox>
                <VBox styleClass="stat-card">
                    <HBox alignment="CENTER" spacing="10">
                        <ImageView fitWidth="30" fitHeight="30">
                            <Image url="@images/places.png" />
                        </ImageView>
                        <Label text="إجمالي الأماكن" styleClass="stat-title"/>
                    </HBox>
                    <Label fx:id="totalPlacesLabel" text="0 مكان" styleClass="stat-value"/>
                </VBox>
                <VBox styleClass="stat-card">
                    <HBox alignment="CENTER" spacing="10">
                        <ImageView fitWidth="30" fitHeight="30">
                            <Image url="@images/reviews.png" />
                        </ImageView>
                        <Label text="متوسط التقييمات" styleClass="stat-title"/>
                    </HBox>
                    <Label fx:id="avgRatingLabel" text="0.0" styleClass="stat-value"/>
                </VBox>
            </HBox>

            <VBox styleClass="section-card">
                <HBox alignment="CENTER_RIGHT"  spacing="10">
                    <Label text="أحدث التعليقات" styleClass="section-title"/>
                    <ImageView fitWidth="24" fitHeight="24">
                        <Image url="@images/recent.png" />
                    </ImageView>
                </HBox>
                <TableView fx:id="reviewsTableView" style="-fx-max-height: 300;">
                    <columns>
                        <TableColumn text="المستخدم" prefWidth="120">
                            <cellValueFactory><PropertyValueFactory property="userName"/></cellValueFactory>
                        </TableColumn>
                        <TableColumn text="المكان" prefWidth="150">
                            <cellValueFactory><PropertyValueFactory property="placeName"/></cellValueFactory>
                        </TableColumn>
                        <TableColumn text="التعليق" prefWidth="200">
                            <cellValueFactory><PropertyValueFactory property="description"/></cellValueFactory>
                        </TableColumn>
                        <TableColumn text="التقييم" prefWidth="80">
                            <cellValueFactory>
                                <PropertyValueFactory property="rating"/>
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn text="التاريخ" prefWidth="120">
                            <cellValueFactory><PropertyValueFactory property="createdAt"/></cellValueFactory>
                        </TableColumn>
                    </columns>
                </TableView>
            </VBox>
        </VBox>
    </center>

    <bottom>
        <HBox style="-fx-background-color: #ecf0f1; -fx-padding: 10;" alignment="CENTER">
            <Label text="الحالة:"/>
            <Label fx:id="statusLabel" text="جاهز" style="-fx-text-fill: #27ae60; -fx-padding: 0 0 0 10;"/>
            <ProgressIndicator fx:id="loadingIndicator" visible="false" style="-fx-pref-width: 20; -fx-pref-height: 20;"/>
        </HBox>
    </bottom>
</BorderPane>
